**提示 1：** 容易发现，每个数的最终结果等于前面位置的数乘以一个权重再相加。我们只需研究清楚这个权重。

**提示 2：** 考虑从每个位置 $i$ 经过 $k$ 轮到达 $j$ 的方案数。

首先，每个数的最终结果一定是前缀的一个线性组合，即前缀的每个元素乘以一个权重后再相加。我们做题的关键在于找出这个权重。

考虑从 $i$ 出发到 $j$ 带来的权重。

首先这件事可以打表，容易发现一个组合数的结构，借助这个组合数得到最终答案是可行的。

而实际上，我们考虑每个元素 $i$ 是如何对后续元素产生贡献的。

考虑将第 $1,\dots,k$ 轮的长度为 $n$ 的表示从 $j$ 位置开始的贡献的数组排成一个 $k\times n$ 的矩阵 $C$ 。

则 $C_{1,j}=1$ ，而对于其他元素，贡献有两种来源：本行的前缀和（也就是新加的和） + 前一行的当前位置原有的权值（也就是原有的和）。

于是 $C_{x,y}=C_{x-1,y}+C_{x,y-1}$ ，这件事本质上跟从 $(1,1)$ 只往右边往下边走，走到 $x,y$ 的方案数没有本质差别。

而这等价于 $x+y-2$ 次向右 / 向下的操作中选取 $x-1$ 次向下，于是，方案数为 $C_{x+y-2}^{x-1}$ 。

接下来，考虑每一组 $i$ 到 $j$ 的转移，对 $ans[j]$ 更新 $nums[i]$ 对其贡献的数值，即可得到最终答案，时间复杂度为 $\mathcal{O}(n^2)$ 。