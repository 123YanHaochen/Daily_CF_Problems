**提示 1：** 题目中包含的两种连接关系，一种是颜色，一种是连边。只需分别考虑如何刻画即可。

**提示 2：** 考虑新增一条边时，如何保证颜色和边都符合要求。

首先各个颜色都需要有车，所以一开始先在 $(i,i)$ 位置上放上颜色为 $i$ 的车。

接下来，对 $(u, v)$ 连边后，我们应该如何操作呢？

- 为了保证颜色连通，我们应该在第 $u$ 行 / 第 $u$ 列加入颜色为 $u$ 的车。 $v$ 也是类似。

- 同时，我们要保证 $u,v$ 两颜色相连，不妨就用这两辆新车来。

- 于是考虑新开一列，在第 $u$ 行放入颜色为 $u$ 的车，在第 $v$ 行放入颜色为 $v$ 的车（新开一行也是可行的）。

这样我们就满足题目中的相连的条件了。

最后，是否没有连边则一定不相连呢？这个条件实际是有检查的必要的，因为上面没有考虑过。

- 首先，同一行只有一种颜色，所以不会发生没有连边的相连的情况。

- 而同一列的如果出现了两种颜色，也一定是连边了的。

于是条件检查完成。

时间复杂度为 $\mathcal{O}(n + m)$ 。

### 具体代码如下——

Python 做法如下——

```Python []
def main():
    s = I()
    vowels = set('aeiouAEIOU')

    n = len(s)

    ans, cnt = 0, 0
    d = Counter()
    d[0] = -1
    d[1] = -1

    cur = 0
    for i in range(n):
        v = -1 if s[i] in vowels else 2
        cur += v
        if cur not in d:
            if v < 0:
                d[cur] = i
            else:
                d[cur - 1] = d[cur - 2]
                d[cur] = d[cur - 2]
        
        v = i
        for j in range(3):
            if cur - j in d:
                v = fmin(v, d[cur - j])
        
        v = i - v
        if v == ans:
            cnt += 1
        elif v > ans:
            ans = v
            cnt = 1

    if ans: print(ans, cnt)
    else: print('No solution')
```

C++ 做法如下——

```cpp []
int main()
{
    ios_base::sync_with_stdio(false);
    cin.tie(0);
    cout.tie(0);

    string s;
    cin >> s;

    unordered_set<char> st = {'a', 'e', 'i', 'o', 'u', 'A', 'E', 'I', 'O', 'U'};

    int n = s.size(), ans = 0, cnt = 0;
    unordered_map<int, int> mp;
    mp[0] = -1;
    mp[1] = -1;

    int cur = 0;

    for (int i = 0; i < n; i ++) {
        int v = (st.find(s[i]) != st.end() ? -1 : 2);
        cur += v;
        if (mp.find(cur) == mp.end()) {
            if (v < 0) mp[cur] = i;
            else mp[cur - 1] = mp[cur - 2], mp[cur] = mp[cur - 2];
        }

        v = i;
        for (int j = 0; j <= 2; j ++) {
            if (mp.find(cur - j) != mp.end()) {
                v = min(v, mp[cur - j]);
            }
        }

        v = i - v;
        if (v == ans) cnt ++;
        else if (v > ans) {
            ans = v;
            cnt = 1;
        }
    }

    if (ans) cout << ans << ' ' << cnt;
    else cout << "No solution";

    return 0;
}
```