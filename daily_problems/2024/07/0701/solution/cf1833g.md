**提示 1：** 我们要把树拆成一系列组件。请从最容易确定组件的位置开始拆。

**提示 2：** 上述过程相当于一个树形 DP 。

简单的贪心。

我们从叶子出发，这个叶子一定和其父节点在同一个组件中。剩下一个元素呢？

- 其有可能是另一个叶子，如果这样，其父节点除了这两个子节点外，剩余的子树都应该自己拆分。（这些子树的拆分逻辑和当前节点一样）

- 其有可能是父节点的父节点，此时，父节点和父节点的父节点的其余子树都应该能够自行拆分为组件。（这些子树的拆分逻辑和当前节点一样）

上述逻辑进一步提炼，可以发现，我们从叶子出发不断往根走，贪心地取大小为 $3$ 的子树即满足要求。

从代码逻辑来看